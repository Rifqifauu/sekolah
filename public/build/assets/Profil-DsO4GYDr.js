import{r as g,f as D,j as c,c as u,b as l,t as k,d as V,s as S,a as r,i as x,C as w,z as _,o as p}from"./app-COeLgVDB.js";import{A as M}from"./AppLayout-CKvv8zIG.js";import{E as P,S as q}from"./SuccessModal-DvnGcZmV.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I=w({props:{modelValue:String,label:String,type:{type:String,default:"text"},placeholder:String,required:Boolean},emits:["update:modelValue"],template:`
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          {{ label }}
          <span v-if="required" class="text-red-500">*</span>
        </label>
        <input
          :type="type"
          :value="modelValue"
          @input="$emit('update:modelValue', $event.target.value)"
          :placeholder="placeholder"
          :required="required"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500"
        >
      </div>
    `}),U=w({props:{modelValue:String,label:String,placeholder:String,rows:{type:[Number,String],default:3}},emits:["update:modelValue"],template:`
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          {{ label }}
        </label>
        <textarea
          :value="modelValue"
          @input="$emit('update:modelValue', $event.target.value)"
          :placeholder="placeholder"
          :rows="rows"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500"
        ></textarea>
      </div>
    `}),N=w({props:{modelValue:String,label:String,options:Array,required:Boolean},emits:["update:modelValue"],template:`
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          {{ label }}
          <span v-if="required" class="text-red-500">*</span>
        </label>
        <select
          :value="modelValue"
          @input="$emit('update:modelValue', $event.target.value)"
          :required="required"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500"
        >
          <option value="">Pilih {{ label }}</option>
          <option 
            v-for="option in options" 
            :key="option.value"
            :value="option.value"
          >
            {{ option.label }}
          </option>
        </select>
      </div>
    `}),j={name:"EditProfile",layout:M,components:{FormInput:I,FormTextarea:U,FormSelect:N,ErrorModal:P,SuccessModal:q},props:{user:{type:Object,required:!0},userDetail:{type:Object,required:!0},title:String,success:String,error:String},mounted(){document.title=this.title},setup(i){console.log("Props di setup:",i);const a=g({...i.userDetail,name:i.user.name}),b=g(""),e=g(!1),m=g(!1),v=g(null),n=t=>{const s=t.target.files[0];s&&(v.value=URL.createObjectURL(s),a.value.foto=s)},h=D(()=>i.userDetail!==null&&i.userDetail!==void 0);return{showSuccessModal:e,formData:a,preview:v,handleImageChange:n,handleSubmit:async()=>{try{const t=new FormData;Object.entries(a.value).forEach(([f,d])=>{d!=null&&(f==="foto"&&d instanceof File,t.append(f,d))}),i.userDetail&&t.append("_method","PUT"),t.forEach((f,d)=>{console.log("Isi Form",`Key: ${d}, Value: ${f}`)});const s=i.userDetail?"/profile/edit":"/profile/store",o=await _.post(s,t);console.log(o.data),o.status===200&&(e.value=!0,setTimeout(()=>{e.value=!1},2e3))}catch(t){if(t.response&&t.response.data.errors)console.error("Error updating profile:",t),b.value=t.response.data.errors,m.value=!0,setTimeout(()=>{m.value=!1},2e3);else{console.error("An unexpected error occurred:",t.response.data.messages);for(let s in t.response.data.messages)t.response.data.messages.hasOwnProperty(s)&&(console.log(`Error in ${s}:`,t.response.data.messages[s][0]),b.value=t.response.data.messages[s][0],m.value=!0,setTimeout(()=>{m.value=!1},2e3))}}},isEdit:h,showErrorModal:m,errorMessage:b}}},F={class:"min-h-screen bg-gray-50 py-8 px-4"},C={class:"max-w-4xl mx-auto bg-white shadow-xl rounded-lg overflow-hidden"},T={class:"bg-red-600 text-white flex justify-between items-center p-4 rounded-2xl"},B={class:"text-lg font-semibold"},K={class:"md:w-2/5 p-6 bg-gray-50"},A={class:"text-center mb-6"},L={class:"w-40 h-50 mx-auto rounded overflow-hidden border-4 border-white shadow-lg relative group"},O=["src","alt"],z={key:1,class:"w-full h-full p-8 bg-gray-200 flex items-center justify-center"},G={class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},H={class:"cursor-pointer bg-white text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-100"},R={class:"mt-4 text-left space-y-4"},J={class:"space-y-4"},Q=["value"],W={class:"space-y-4 mt-4"},X={key:0,href:"view/sk_diterima",target:"_blank",class:"inline-flex text-sm items-center gap-2 px-2 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 hover:bg-blue-700 hover:-translate-y-1 active:translate-y-0"},Y={key:1,target:"_blank",href:"view/surat-pernyataan/",class:"inline-flex text-sm items-center gap-2 px-2 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 hover:bg-blue-700 hover:-translate-y-1 active:translate-y-0"},Z={key:2,href:"view/sk_selesai",class:"inline-flex text-sm items-center px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md transition-all duration-300 hover:bg-blue-700 hover:-translate-y-1 active:translate-y-0"},$={class:"md:w-3/5 p-6"},ee={class:"space-y-4"};function ae(i,a,b,e,m,v){const n=c("FormInput"),h=c("ErrorModal"),y=c("SuccessModal"),t=c("FormTextarea"),s=c("FormSelect");return p(),u("div",F,[l("div",C,[l("div",T,[l("h2",B,k(e.isEdit?"Edit Profile":"Create Profile"),1),l("button",{onClick:a[0]||(a[0]=(...o)=>e.handleSubmit&&e.handleSubmit(...o)),class:"flex items-center bg-white text-red-600 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors"},[a[15]||(a[15]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),V(" "+k(e.isEdit?"Simpan":"Buat"),1)])]),l("form",{onSubmit:a[14]||(a[14]=S((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"])),class:"md:flex"},[l("aside",K,[l("div",A,[l("div",L,[e.preview||e.formData.foto?(p(),u("img",{key:0,src:e.preview||`/storage/${e.formData.foto}`,alt:e.formData.name,class:"w-full h-full object-cover"},null,8,O)):(p(),u("div",z,a[16]||(a[16]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-full h-full text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]))),l("div",G,[l("label",H,[l("input",{type:"file",class:"hidden",accept:"image/*",onChange:a[1]||(a[1]=(...o)=>e.handleImageChange&&e.handleImageChange(...o))},null,32),a[17]||(a[17]=V(" Ganti Foto "))])])]),l("div",R,[r(n,{modelValue:e.formData.name,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.name=o),label:"Nama Lengkap",placeholder:"Masukkan nama lengkap"},null,8,["modelValue"]),r(n,{modelValue:e.formData.panggilan,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.panggilan=o),label:"Nama Panggilan",placeholder:"Masukkan nama panggilan"},null,8,["modelValue"])])]),l("div",J,[a[18]||(a[18]=l("h2",{class:"text-xl font-semibold text-red-600"},"Kontak",-1)),r(n,{modelValue:e.formData.nomor_hp,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.nomor_hp=o),type:"tel",label:"Nomor HP",placeholder:"Masukkan nomor HP"},null,8,["modelValue"]),r(n,{modelValue:e.formData.medsos,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formData.medsos=o),label:"Media Sosial",placeholder:"Link media sosial"},null,8,["modelValue"])]),a[19]||(a[19]=l("h2",{class:"text-md mt-4 font-semibold text-red-600"},"Status Pendaftaran",-1)),l("input",{value:e.formData.status_pendaftaran,disabled:""},null,8,Q),l("div",W,[e.formData.status_pendaftaran=="diterima"?(p(),u("a",X," Surat Keterangan Diterima ")):x("",!0),e.formData.status_pendaftaran=="diterima"?(p(),u("a",Y," Surat Kesanggupan ")):x("",!0),e.formData.status_pendaftaran=="selesai"?(p(),u("a",Z," Surat Keterangan Selesai Magang ")):x("",!0)])]),r(h,{show:e.showErrorModal,message:e.errorMessage,title:"Gagal Memperbarui Profil"},null,8,["show","message"]),r(y,{show:e.showSuccessModal,title:"Berhasil Memperbarui Profil"},null,8,["show"]),l("main",$,[a[20]||(a[20]=l("h2",{class:"text-2xl font-semibold text-red-600 mb-4"},"Biodata",-1)),l("div",ee,[r(n,{modelValue:e.formData.nim,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formData.nim=o),label:"NIM/NIS/NIP",placeholder:"Masukkan Nomor Induk Institusi",required:""},null,8,["modelValue"]),r(n,{modelValue:e.formData.nik,"onUpdate:modelValue":a[7]||(a[7]=o=>e.formData.nik=o),label:"NIK",placeholder:"Masukkan NIK",required:""},null,8,["modelValue"]),r(n,{modelValue:e.formData.agama,"onUpdate:modelValue":a[8]||(a[8]=o=>e.formData.agama=o),label:"Agama",placeholder:"Masukkan Agama",required:""},null,8,["modelValue"]),r(n,{modelValue:e.formData.program_studi,"onUpdate:modelValue":a[9]||(a[9]=o=>e.formData.program_studi=o),label:"Program Studi",placeholder:"Masukkan program studi",required:""},null,8,["modelValue"]),r(n,{modelValue:e.formData.institusi,"onUpdate:modelValue":a[10]||(a[10]=o=>e.formData.institusi=o),label:"Institusi/PT",placeholder:"Masukkan institusi/PT",required:""},null,8,["modelValue"]),r(t,{modelValue:e.formData.alamat,"onUpdate:modelValue":a[11]||(a[11]=o=>e.formData.alamat=o),label:"Alamat (KTP)",placeholder:"Masukkan alamat lengkap",rows:"3"},null,8,["modelValue"]),r(t,{modelValue:e.formData.domisili,"onUpdate:modelValue":a[12]||(a[12]=o=>e.formData.domisili=o),label:"Domisili",placeholder:"Masukkan domisili selama magang",rows:"3"},null,8,["modelValue"]),r(s,{modelValue:e.formData.jenis_kelamin,"onUpdate:modelValue":a[13]||(a[13]=o=>e.formData.jenis_kelamin=o),label:"Jenis Kelamin",options:[{value:"Laki-laki",label:"Laki-laki"},{value:"Perempuan",label:"Perempuan"}],required:""},null,8,["modelValue"])])])],32)])])}const se=E(j,[["render",ae]]);export{se as default};
